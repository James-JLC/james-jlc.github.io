<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"james-jlc.github.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"hide","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="知秋">
<meta property="og:url" content="http://james-jlc.github.io/index.html">
<meta property="og:site_name" content="知秋">
<meta property="article:author" content="ZhiQiu">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://james-jlc.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>知秋</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">知秋</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">观一叶而知秋</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">27</span></a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">27</span></a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://james-jlc.github.io/2023/11/28/Decrypt-chrome-saved-password/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiQiu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="知秋">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/11/28/Decrypt-chrome-saved-password/" class="post-title-link" itemprop="url">解密Chrome浏览器保存在本地的用户名密码</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-11-28 10:16:30 / 修改时间：11:11:18" itemprop="dateCreated datePublished" datetime="2023-11-28T10:16:30+08:00">2023-11-28</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>谷歌(包括微软Edge)浏览器保存的Cookie及网站用户名密码都是以sqlite数据库文件存储在本地的，Linux系统下的目录为～/.config/microsoft-edge/Default，Windows系统下目录为C:\Users{user}\AppData\Local\Google\Chrome\User Data\Default，其中的Login Data和Cookies文件就是存储密码的数据库文件。</p>
<p>注： Windows、Linux和Mac获取password_value的逻辑稍有不同，Windows的密钥是存储在文件中的，Linux和Mac可以通过DBUS接口获取。</p>
<p>安装依赖库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install cryptography SecretStorage</span><br></pre></td></tr></table></figure>
<p>主体代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">#! &#x2F;usr&#x2F;bin&#x2F;env python3</span><br><span class="line"></span><br><span class="line">from cryptography.hazmat.primitives.ciphers import Cipher</span><br><span class="line">from cryptography.hazmat.primitives.ciphers.algorithms import AES</span><br><span class="line">from cryptography.hazmat.primitives.ciphers.modes import CBC</span><br><span class="line">from cryptography.hazmat.primitives.hashes import SHA1</span><br><span class="line">from cryptography.hazmat.primitives.kdf.pbkdf2 import PBKDF2HMAC</span><br><span class="line"></span><br><span class="line">from cryptography.hazmat.primitives.kdf.pbkdf2 import PBKDF2HMAC</span><br><span class="line"></span><br><span class="line">import secretstorage</span><br><span class="line"></span><br><span class="line"># Function to get rid of padding</span><br><span class="line">def clean(decrypted: bytes) -&gt; str:</span><br><span class="line">    last &#x3D; decrypted[-1]</span><br><span class="line">    if isinstance(last, int):</span><br><span class="line">            return decrypted[:-last].decode(&quot;utf8&quot;)</span><br><span class="line">    return decrypted[: -ord(last)].decode(&quot;utf8&quot;)</span><br><span class="line"></span><br><span class="line"># 获取Chrome密钥</span><br><span class="line">def find_pass():</span><br><span class="line">    bus &#x3D; secretstorage.dbus_init()</span><br><span class="line">    collection &#x3D; secretstorage.get_default_collection(bus)</span><br><span class="line">    for item in collection.get_all_items():</span><br><span class="line">        print(item.get_label(), &quot; :&quot;, item.get_secret())</span><br><span class="line">        if item.get_label() &#x3D;&#x3D; &#39;Chromium Safe Storage&#39;:</span><br><span class="line">            return item.get_secret()</span><br><span class="line">    else:</span><br><span class="line">        raise Exception(&#39;Chrome password not found!&#39;)</span><br><span class="line"></span><br><span class="line">#密文，前三个字符一般为v10或v11</span><br><span class="line">password_value &#x3D; b&#39;v11******&#39;</span><br><span class="line"></span><br><span class="line">kdf &#x3D; PBKDF2HMAC(</span><br><span class="line">        algorithm&#x3D;SHA1(),</span><br><span class="line">        iterations&#x3D;1,</span><br><span class="line">        length&#x3D;16,</span><br><span class="line">        salt&#x3D;b&#39;saltysalt&#39;,</span><br><span class="line">    )</span><br><span class="line">enc_key &#x3D; kdf.derive(find_pass())</span><br><span class="line"></span><br><span class="line">cipher &#x3D; Cipher(algorithm&#x3D;AES(enc_key),mode&#x3D;CBC(b&#39;                &#39;))</span><br><span class="line"></span><br><span class="line">encrypted_value &#x3D; password_value[3:]</span><br><span class="line">decryptor &#x3D; cipher.decryptor()</span><br><span class="line">decrypted &#x3D; decryptor.update(encrypted_value) + decryptor.finalize()</span><br><span class="line">print(clean(decrypted))</span><br></pre></td></tr></table></figure>

<p>参考链接：</p>
<p><a href="https://www.cnblogs.com/CourserLi/p/16941184.html" target="_blank" rel="noopener">https://www.cnblogs.com/CourserLi/p/16941184.html</a></p>
<p><a href="https://www.jianshu.com/p/9ad6e8087c58" target="_blank" rel="noopener">https://www.jianshu.com/p/9ad6e8087c58</a></p>
<p><a href="https://github.com/n8henrie/pycookiecheat" target="_blank" rel="noopener">https://github.com/n8henrie/pycookiecheat</a></p>
<p><a href="http://www.meilongkui.com/archives/1904" target="_blank" rel="noopener">http://www.meilongkui.com/archives/1904</a></p>
<p><a href="https://stackoverflow.com/questions/23153159/decrypting-chromium-cookies/23727331#23727331" target="_blank" rel="noopener">https://stackoverflow.com/questions/23153159/decrypting-chromium-cookies/23727331#23727331</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://james-jlc.github.io/2023/10/30/Crack-JDC-Router-5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiQiu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="知秋">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/30/Crack-JDC-Router-5/" class="post-title-link" itemprop="url">破解某东路由宝之构造官方固件并刷机</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-30 19:44:45" itemprop="dateCreated datePublished" datetime="2023-10-30T19:44:45+08:00">2023-10-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-11-21 13:05:52" itemprop="dateModified" datetime="2023-11-21T13:05:52+08:00">2023-11-21</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://james-jlc.github.io/2023/10/30/Crack-JDC-Router-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiQiu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="知秋">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/30/Crack-JDC-Router-4/" class="post-title-link" itemprop="url">破解某东路由宝之官方固件解包</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-30 19:44:08" itemprop="dateCreated datePublished" datetime="2023-10-30T19:44:08+08:00">2023-10-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-11-30 15:41:10" itemprop="dateModified" datetime="2023-11-30T15:41:10+08:00">2023-11-30</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>将上次解析出来的固件包使用binwalk进行分析，显示如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DECIMAL       HEXADECIMAL     DESCRIPTION</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">0             0x0             uImage header, header size: 64 bytes, header CRC: 0x879D8349, created: 2022-02-15 02:10:52, image size: 1741422 bytes, Data Address: 0x82001000, Entry Point: 0x82001000, data CRC: 0xA2E8A9E0, OS: Linux, CPU: MIPS, image type: OS Kernel Image, compression type: lzma, image name: &quot;OpenWrt Linux-3.10.108&quot;</span><br><span class="line">64            0x40            LZMA compressed data, properties: 0x6D, dictionary size: 8388608 bytes, uncompressed size: 5126400 bytes</span><br><span class="line">1741486       0x1A92AE        Squashfs filesystem, little endian, version 4.0, compression:xz, size: 12958032 bytes, 2918 inodes, blocksize: 1644891052 bytes, created: 1970-01-04 00:49:04</span><br></pre></td></tr></table></figure>

<p>于是尝试使用binwalk解包，显示如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line">binwalk -Me dec.bin                                                       </span><br><span class="line"></span><br><span class="line">Scan Time:     2023-11-28 12:20:59</span><br><span class="line">Target File:   .&#x2F;_full.bin-0.extracted&#x2F;squashfs-root&#x2F;test&#x2F;dec.bin</span><br><span class="line">MD5 Checksum:  507cab500d74c85f2ab4f84dfa0774fe</span><br><span class="line">Signatures:    411</span><br><span class="line"></span><br><span class="line">DECIMAL       HEXADECIMAL     DESCRIPTION</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">0             0x0             uImage header, header size: 64 bytes, header CRC: 0x879D8349, created: 2022-02-15 02:10:52, image size: 1741422 bytes, Data Address: 0x82001000, Entry Point: 0x82001000, data CRC: 0xA2E8A9E0, OS: Linux, CPU: MIPS, image type: OS Kernel Image, compression type: lzma, image name: &quot;OpenWrt Linux-3.10.108&quot;</span><br><span class="line">64            0x40            LZMA compressed data, properties: 0x6D, dictionary size: 8388608 bytes, uncompressed size: 5126400 bytes</span><br><span class="line">1741486       0x1A92AE        Squashfs filesystem, little endian, version 4.0, compression:xz, size: 12958032 bytes, 2918 inodes, blocksize: 1644891052 bytes, created: 1970-01-04 00:49:04</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Scan Time:     2023-11-28 12:20:59</span><br><span class="line">Target File:   .&#x2F;_full.bin-0.extracted&#x2F;squashfs-root&#x2F;test&#x2F;_dec.bin-1.extracted&#x2F;40</span><br><span class="line">MD5 Checksum:  8a45c216a579a11540105e688ad8b602</span><br><span class="line">Signatures:    411</span><br><span class="line"></span><br><span class="line">DECIMAL       HEXADECIMAL     DESCRIPTION</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">1407126       0x157896        PGP RSA encrypted session key - keyid: 80102B 10820050 RSA (Encrypt or Sign) 1024b</span><br><span class="line">3997812       0x3D0074        Linux kernel version 3.10.1</span><br><span class="line">3998076       0x3D017C        CRC32 polynomial table, little endian</span><br><span class="line">4023656       0x3D6568        gzip compressed data, maximum compression, from Unix, last modified: 1970-01-01 00:00:00 (null date)</span><br><span class="line">4116354       0x3ECF82        Certificate in DER format (x509 v3), header length: 4, sequence length: 30947</span><br><span class="line">4116358       0x3ECF86        Certificate in DER format (x509 v3), header length: 4, sequence length: 22755</span><br><span class="line">4116362       0x3ECF8A        Certificate in DER format (x509 v3), header length: 4, sequence length: 10467</span><br><span class="line">4116374       0x3ECF96        Certificate in DER format (x509 v3), header length: 4, sequence length: 18659</span><br><span class="line">4116378       0x3ECF9A        Certificate in DER format (x509 v3), header length: 4, sequence length: 14563</span><br><span class="line">4116402       0x3ECFB2        Certificate in DER format (x509 v3), header length: 4, sequence length: 28898</span><br><span class="line">4116438       0x3ECFD6        Certificate in DER format (x509 v3), header length: 4, sequence length: 29921</span><br><span class="line">4116478       0x3ECFFE        Certificate in DER format (x509 v3), header length: 4, sequence length: 29919</span><br><span class="line">4116482       0x3ED002        Certificate in DER format (x509 v3), header length: 4, sequence length: 3297</span><br><span class="line">4116514       0x3ED022        Certificate in DER format (x509 v3), header length: 4, sequence length: 6369</span><br><span class="line">4116550       0x3ED046        Certificate in DER format (x509 v3), header length: 4, sequence length: 1248</span><br><span class="line">4116766       0x3ED11E        Certificate in DER format (x509 v3), header length: 4, sequence length: 25836</span><br><span class="line">4116786       0x3ED132        Certificate in DER format (x509 v3), header length: 4, sequence length: 21742</span><br><span class="line">4116790       0x3ED136        Certificate in DER format (x509 v3), header length: 4, sequence length: 9454</span><br><span class="line">4116806       0x3ED146        Certificate in DER format (x509 v3), header length: 4, sequence length: 3310</span><br><span class="line">4116810       0x3ED14A        Certificate in DER format (x509 v3), header length: 4, sequence length: 15598</span><br><span class="line">4116818       0x3ED152        Certificate in DER format (x509 v3), header length: 4, sequence length: 27886</span><br><span class="line">4116830       0x3ED15E        Certificate in DER format (x509 v3), header length: 4, sequence length: 17648</span><br><span class="line">4116890       0x3ED19A        Certificate in DER format (x509 v3), header length: 4, sequence length: 19695</span><br><span class="line">4116906       0x3ED1AA        Certificate in DER format (x509 v3), header length: 4, sequence length: 23792</span><br><span class="line">4116910       0x3ED1AE        Certificate in DER format (x509 v3), header length: 4, sequence length: 23792</span><br><span class="line">4116914       0x3ED1B2        Certificate in DER format (x509 v3), header length: 4, sequence length: 23792</span><br><span class="line">4116918       0x3ED1B6        Certificate in DER format (x509 v3), header length: 4, sequence length: 23792</span><br><span class="line">4116954       0x3ED1DA        Certificate in DER format (x509 v3), header length: 4, sequence length: 26866</span><br><span class="line">4185014       0x3FDBB6        Certificate in DER format (x509 v3), header length: 4, sequence length: 10240</span><br><span class="line">4185018       0x3FDBBA        Certificate in DER format (x509 v3), header length: 4, sequence length: 20480</span><br><span class="line">4185022       0x3FDBBE        Certificate in DER format (x509 v3), header length: 4, sequence length: 22528</span><br><span class="line">4185026       0x3FDBC2        Certificate in DER format (x509 v3), header length: 4, sequence length: 24576</span><br><span class="line">4185030       0x3FDBC6        Certificate in DER format (x509 v3), header length: 4, sequence length: 26624</span><br><span class="line">4185038       0x3FDBCE        Certificate in DER format (x509 v3), header length: 4, sequence length: 3074</span><br><span class="line">4185046       0x3FDBD6        Certificate in DER format (x509 v3), header length: 4, sequence length: 28675</span><br><span class="line">4185058       0x3FDBE2        Certificate in DER format (x509 v3), header length: 4, sequence length: 23558</span><br><span class="line">4185066       0x3FDBEA        Certificate in DER format (x509 v3), header length: 4, sequence length: 15369</span><br><span class="line">4185070       0x3FDBEE        Certificate in DER format (x509 v3), header length: 4, sequence length: 27657</span><br><span class="line">4185078       0x3FDBF6        Certificate in DER format (x509 v3), header length: 4, sequence length: 2058</span><br><span class="line">4185086       0x3FDBFE        Certificate in DER format (x509 v3), header length: 4, sequence length: 17419</span><br><span class="line">4185090       0x3FDC02        Certificate in DER format (x509 v3), header length: 4, sequence length: 22539</span><br><span class="line">4185114       0x3FDC1A        Certificate in DER format (x509 v3), header length: 4, sequence length: 17428</span><br><span class="line">4185122       0x3FDC22        Certificate in DER format (x509 v3), header length: 4, sequence length: 21525</span><br><span class="line">4185130       0x3FDC2A        Certificate in DER format (x509 v3), header length: 4, sequence length: 12312</span><br><span class="line">4185142       0x3FDC36        Certificate in DER format (x509 v3), header length: 4, sequence length: 27673</span><br><span class="line">4185146       0x3FDC3A        Certificate in DER format (x509 v3), header length: 4, sequence length: 12316</span><br><span class="line">4185150       0x3FDC3E        Certificate in DER format (x509 v3), header length: 4, sequence length: 19493</span><br><span class="line">4185162       0x3FDC4A        Certificate in DER format (x509 v3), header length: 4, sequence length: 29735</span><br><span class="line">4185170       0x3FDC52        Certificate in DER format (x509 v3), header length: 4, sequence length: 30760</span><br><span class="line">4185174       0x3FDC56        Certificate in DER format (x509 v3), header length: 4, sequence length: 13356</span><br><span class="line">4185182       0x3FDC5E        Certificate in DER format (x509 v3), header length: 4, sequence length: 13357</span><br><span class="line">4185186       0x3FDC62        Certificate in DER format (x509 v3), header length: 4, sequence length: 18481</span><br><span class="line">4185190       0x3FDC66        Certificate in DER format (x509 v3), header length: 4, sequence length: 20529</span><br><span class="line">4185194       0x3FDC6A        Certificate in DER format (x509 v3), header length: 4, sequence length: 22588</span><br><span class="line">4185206       0x3FDC76        Certificate in DER format (x509 v3), header length: 4, sequence length: 8256</span><br><span class="line">4185210       0x3FDC7A        Certificate in DER format (x509 v3), header length: 4, sequence length: 27714</span><br><span class="line">4185214       0x3FDC7E        Certificate in DER format (x509 v3), header length: 4, sequence length: 19524</span><br><span class="line">4185226       0x3FDC8A        Certificate in DER format (x509 v3), header length: 4, sequence length: 1095</span><br><span class="line">4185230       0x3FDC8E        Certificate in DER format (x509 v3), header length: 4, sequence length: 4167</span><br><span class="line">4185234       0x3FDC92        Certificate in DER format (x509 v3), header length: 4, sequence length: 13383</span><br><span class="line">4185246       0x3FDC9E        Certificate in DER format (x509 v3), header length: 4, sequence length: 6216</span><br><span class="line">4185254       0x3FDCA6        Certificate in DER format (x509 v3), header length: 4, sequence length: 30794</span><br><span class="line">4185262       0x3FDCAE        Certificate in DER format (x509 v3), header length: 4, sequence length: 16460</span><br><span class="line">4185270       0x3FDCB6        Certificate in DER format (x509 v3), header length: 4, sequence length: 30803</span><br><span class="line">4185274       0x3FDCBA        Certificate in DER format (x509 v3), header length: 4, sequence length: 84</span><br><span class="line">4185282       0x3FDCC2        Certificate in DER format (x509 v3), header length: 4, sequence length: 29781</span><br><span class="line">4185286       0x3FDCC6        Certificate in DER format (x509 v3), header length: 4, sequence length: 26710</span><br><span class="line">4185290       0x3FDCCA        Certificate in DER format (x509 v3), header length: 4, sequence length: 24663</span><br><span class="line">4185294       0x3FDCCE        Certificate in DER format (x509 v3), header length: 4, sequence length: 28762</span><br><span class="line">4185298       0x3FDCD2        Certificate in DER format (x509 v3), header length: 4, sequence length: 19551</span><br><span class="line">4185306       0x3FDCDA        Certificate in DER format (x509 v3), header length: 4, sequence length: 24673</span><br><span class="line">4185314       0x3FDCE2        Certificate in DER format (x509 v3), header length: 4, sequence length: 12391</span><br><span class="line">4185318       0x3FDCE6        Certificate in DER format (x509 v3), header length: 4, sequence length: 17511</span><br><span class="line">4185346       0x3FDD02        Certificate in DER format (x509 v3), header length: 4, sequence length: 124</span><br><span class="line">4185358       0x3FDD0E        Certificate in DER format (x509 v3), header length: 4, sequence length: 20606</span><br><span class="line">4185366       0x3FDD16        Certificate in DER format (x509 v3), header length: 4, sequence length: 133</span><br><span class="line">4185370       0x3FDD1A        Certificate in DER format (x509 v3), header length: 4, sequence length: 24716</span><br><span class="line">4185378       0x3FDD22        Certificate in DER format (x509 v3), header length: 4, sequence length: 1165</span><br><span class="line">4185386       0x3FDD2A        Certificate in DER format (x509 v3), header length: 4, sequence length: 26770</span><br><span class="line">4185418       0x3FDD4A        Certificate in DER format (x509 v3), header length: 4, sequence length: 18589</span><br><span class="line">4185442       0x3FDD62        Certificate in DER format (x509 v3), header length: 4, sequence length: 10420</span><br><span class="line">4185458       0x3FDD72        Certificate in DER format (x509 v3), header length: 4, sequence length: 31937</span><br><span class="line">4185462       0x3FDD76        Certificate in DER format (x509 v3), header length: 4, sequence length: 4290</span><br><span class="line">4185466       0x3FDD7A        Certificate in DER format (x509 v3), header length: 4, sequence length: 24770</span><br><span class="line">4185494       0x3FDD96        Certificate in DER format (x509 v3), header length: 4, sequence length: 23767</span><br><span class="line">4185498       0x3FDD9A        Certificate in DER format (x509 v3), header length: 4, sequence length: 6360</span><br><span class="line">4185502       0x3FDD9E        Certificate in DER format (x509 v3), header length: 4, sequence length: 24792</span><br><span class="line">4185506       0x3FDDA2        Certificate in DER format (x509 v3), header length: 4, sequence length: 27864</span><br><span class="line">4185518       0x3FDDAE        Certificate in DER format (x509 v3), header length: 4, sequence length: 7390</span><br><span class="line">4185534       0x3FDDBE        Certificate in DER format (x509 v3), header length: 4, sequence length: 21736</span><br><span class="line">4185538       0x3FDDC2        Certificate in DER format (x509 v3), header length: 4, sequence length: 31978</span><br><span class="line">4185542       0x3FDDC6        Certificate in DER format (x509 v3), header length: 4, sequence length: 2296</span><br><span class="line">4185554       0x3FDDD2        Certificate in DER format (x509 v3), header length: 4, sequence length: 6395</span><br><span class="line">4185562       0x3FDDDA        Certificate in DER format (x509 v3), header length: 4, sequence length: 255</span><br><span class="line">4185566       0x3FDDDE        Certificate in DER format (x509 v3), header length: 4, sequence length: 12543</span><br><span class="line">4454928       0x43FA10        xz compressed data</span><br><span class="line">4473168       0x444150        Unix path: &#x2F;lib&#x2F;firmware&#x2F;updates&#x2F;3.10.108</span><br><span class="line">4495888       0x449A10        Unix path: &#x2F;var&#x2F;run&#x2F;udhcpc.pid</span><br><span class="line">4549848       0x456CD8        Neighborly text, &quot;NeighborSolicitsp6InMsgs&quot;</span><br><span class="line">4549868       0x456CEC        Neighborly text, &quot;NeighborAdvertisementsrs&quot;</span><br><span class="line">4553530       0x457B3A        Neighborly text, &quot;neighbor %.2x%.2x.%pM lost rename link %s to %s&quot;</span><br><span class="line">4725184       0x4819C0        CRC32 polynomial table, little endian</span><br><span class="line">4886602       0x4A904A        Certificate in DER format (x509 v3), header length: 4, sequence length: 15369</span><br><span class="line">4887374       0x4A934E        Certificate in DER format (x509 v3), header length: 4, sequence length: 12312</span><br><span class="line">4887378       0x4A9352        Certificate in DER format (x509 v3), header length: 4, sequence length: 10240</span><br><span class="line">4887382       0x4A9356        Certificate in DER format (x509 v3), header length: 4, sequence length: 24576</span><br><span class="line">4887406       0x4A936E        Certificate in DER format (x509 v3), header length: 4, sequence length: 22528</span><br><span class="line">4887574       0x4A9416        Certificate in DER format (x509 v3), header length: 4, sequence length: 28675</span><br><span class="line">4887598       0x4A942E        Certificate in DER format (x509 v3), header length: 4, sequence length: 17428</span><br><span class="line">4887602       0x4A9432        Certificate in DER format (x509 v3), header length: 4, sequence length: 31937</span><br><span class="line">5112308       0x4E01F4        ASCII cpio archive (SVR4 with no CRC), file name: &quot;dev&quot;, file name length: &quot;0x00000004&quot;, file size: &quot;0x00000000&quot;</span><br><span class="line">5112424       0x4E0268        ASCII cpio archive (SVR4 with no CRC), file name: &quot;dev&#x2F;console&quot;, file name length: &quot;0x0000000C&quot;, file size: &quot;0x00000000&quot;</span><br><span class="line">5112548       0x4E02E4        ASCII cpio archive (SVR4 with no CRC), file name: &quot;root&quot;, file name length: &quot;0x00000005&quot;, file size: &quot;0x00000000&quot;</span><br><span class="line">5112664       0x4E0358        ASCII cpio archive (SVR4 with no CRC), file name: &quot;TRAILER!!!&quot;, file name length: &quot;0x0000000B&quot;, file size: &quot;0x00000000&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Scan Time:     2023-11-28 12:21:00</span><br><span class="line">Target File:   .&#x2F;_full.bin-0.extracted&#x2F;squashfs-root&#x2F;test&#x2F;_dec.bin-1.extracted&#x2F;_40.extracted&#x2F;3D6568</span><br><span class="line">MD5 Checksum:  feef2ce937a96646234e78fc025639d8</span><br><span class="line">Signatures:    411</span><br><span class="line"></span><br><span class="line">DECIMAL       HEXADECIMAL     DESCRIPTION</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Scan Time:     2023-11-28 12:21:00</span><br><span class="line">Target File:   .&#x2F;_full.bin-0.extracted&#x2F;squashfs-root&#x2F;test&#x2F;_dec.bin-1.extracted&#x2F;_40.extracted&#x2F;console</span><br><span class="line">MD5 Checksum:  d41d8cd98f00b204e9800998ecf8427e</span><br><span class="line">Signatures:    411</span><br><span class="line"></span><br><span class="line">DECIMAL       HEXADECIMAL     DESCRIPTION</span><br><span class="line">--------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://james-jlc.github.io/2023/10/30/Crack-JDC-Router-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiQiu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="知秋">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/30/Crack-JDC-Router-3/" class="post-title-link" itemprop="url">破解某东路由宝之官方固件结构</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-30 19:43:27" itemprop="dateCreated datePublished" datetime="2023-10-30T19:43:27+08:00">2023-10-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-11-28 11:39:24" itemprop="dateModified" datetime="2023-11-28T11:39:24+08:00">2023-11-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>通过官方固件中的某二进制文件我们可以得知固件的结构如下：</p>
<ul>
<li>0x00-0x03：     固定字符HIMG</li>
<li>0x0c-0x0f：     真实的固件大小</li>
<li>0x10-0x1F：     固件的MD5值</li>
<li>0x20-0x11F：    固件RSA签名</li>
<li>0x220-0x22F：   AES-128-CBC KEY</li>
<li>0x230-0x23F：   AES-128-CBC IV</li>
<li>0x240-文件末尾： 加密主体</li>
</ul>
<p>通过以上结构，我们可以很容易写出解密固件的代码逻辑：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">int decrypt(char *encrypt_content, int encrypt_size, char *key, char *iv, char *dec_content)</span><br><span class="line">&#123;</span><br><span class="line">    int result &#x3D; -1;</span><br><span class="line">    EVP_CIPHER_CTX *ctx;</span><br><span class="line">    int dec_out[2];</span><br><span class="line"></span><br><span class="line">    ctx &#x3D; EVP_CIPHER_CTX_new();</span><br><span class="line">    if (ctx &#x3D;&#x3D; 0)</span><br><span class="line">    &#123;</span><br><span class="line">        ERR_print_errors_fp(stderr);</span><br><span class="line">    &#125;</span><br><span class="line">    else</span><br><span class="line">    &#123;</span><br><span class="line">        if (EVP_DecryptInit_ex(ctx, EVP_aes_128_cbc(), 0, key, iv))</span><br><span class="line">        &#123;</span><br><span class="line">            if (EVP_DecryptUpdate(ctx, dec_content, dec_out, encrypt_content, encrypt_size))</span><br><span class="line">            &#123;</span><br><span class="line">                result &#x3D; dec_out[0];</span><br><span class="line">                if (EVP_DecryptFinal_ex(ctx, dec_content + dec_out[0], dec_out))</span><br><span class="line">                &#123;</span><br><span class="line">                    result +&#x3D; dec_out[0];</span><br><span class="line">                &#125;</span><br><span class="line">                else</span><br><span class="line">                &#123;</span><br><span class="line">                    ERR_print_errors_fp(stderr);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            else</span><br><span class="line">            &#123;</span><br><span class="line">                ERR_print_errors_fp(stderr);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            ERR_print_errors_fp(stderr);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if (ctx !&#x3D; 0)</span><br><span class="line">    &#123;</span><br><span class="line">        EVP_CIPHER_CTX_free(ctx);</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br><span class="line">int save_to_file(char *filename, char *decode_buffer, int size)</span><br><span class="line">&#123;</span><br><span class="line">    FILE *fp &#x3D; fopen(filename, &quot;w+&quot;);</span><br><span class="line">    if (NULL &#x3D;&#x3D; fp)</span><br><span class="line">    &#123;</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line">    fwrite(decode_buffer, size, 1, fp);</span><br><span class="line">    fclose(fp);</span><br><span class="line">    fp &#x3D; NULL;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">int decode_img(char *buffer, char *dec_file_name)</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F;获取文件大小</span><br><span class="line">    int size &#x3D; ntohl(*(uint32_t *)(buffer + 0xc));</span><br><span class="line">    char *decoded_buffer &#x3D; malloc(size + -0x230);</span><br><span class="line">    int decoded_size &#x3D; decrypt(buffer + 0x240, size + -0x230, buffer + 0x220, buffer + 0x230, decoded_buffer);</span><br><span class="line">    if (decoded_size &gt; 0)</span><br><span class="line">    &#123;</span><br><span class="line">        return save_to_file(dec_file_name, decoded_buffer, decoded_size);</span><br><span class="line">    &#125;</span><br><span class="line">    return -1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://james-jlc.github.io/2023/10/30/Crack-JDC-Router-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiQiu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="知秋">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/30/Crack-JDC-Router-2/" class="post-title-link" itemprop="url">破解某东路由宝之Qemu模拟运行固件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-30 19:42:16" itemprop="dateCreated datePublished" datetime="2023-10-30T19:42:16+08:00">2023-10-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-11-28 11:12:27" itemprop="dateModified" datetime="2023-11-28T11:12:27+08:00">2023-11-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Qemu是使用最广泛的跨平台仿真软件，可以模拟运行二进制文件和系统固件。因为某东路由是mips小端格式，因此我们使用mipsel进行仿真。</p>
<h4 id="QEMU主要有两种仿真方式："><a href="#QEMU主要有两种仿真方式：" class="headerlink" title="QEMU主要有两种仿真方式："></a>QEMU主要有两种仿真方式：</h4><ul>
<li>用户模式仿真：允许一个（Linux）进程执行在不同架构的CPU上，该模式下，QEMU 可以作为进程级虚拟机。</li>
<li>系统模式仿真：允许仿真完整的系统，包括处理器和配套的外设，该模式下，QEMU 也可以作为系统虚拟机。</li>
</ul>
<h1 id="安装qemu"><a href="#安装qemu" class="headerlink" title="安装qemu"></a>安装qemu</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install qemu </span><br><span class="line">sudo apt-get install qemu-user-static</span><br><span class="line">sudo apt-get install qemu-system</span><br><span class="line">sudo apt-get install uml-utilities</span><br><span class="line">sudo apt-get install bridge-utils</span><br><span class="line">sudo apt-get install qemu-user-static qemu-system-mips</span><br></pre></td></tr></table></figure>
<h1 id="用户模式下仿真"><a href="#用户模式下仿真" class="headerlink" title="用户模式下仿真"></a>用户模式下仿真</h1><p>首先将qemu-mipsel-static拷贝到固件解包的系统目录下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd squashfs-root</span><br><span class="line">cp $(which qemu-mipsel-static) .&#x2F;</span><br></pre></td></tr></table></figure>
<p>执行二进制程序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chroot . .&#x2F;qemu-mipsel-static sbin&#x2F;ifconfig</span><br></pre></td></tr></table></figure>

<h1 id="系统模式下仿真"><a href="#系统模式下仿真" class="headerlink" title="系统模式下仿真"></a>系统模式下仿真</h1><h2 id="下载文件"><a href="#下载文件" class="headerlink" title="下载文件"></a>下载文件</h2><p>首先我们需要从<a href="https://people.debian.org/~aurel32/qemu/mipsel/" target="_blank" rel="noopener">debian官网</a>下载kernel和image，我使用vmlinux-2.6.32-5-4kc-malta和debian_squeeze_mipsel_standard.qcow2。当然也可以使用自己的kernel和imgage，后面模拟固件启动时会用到。</p>
<h2 id="配置网络"><a href="#配置网络" class="headerlink" title="配置网络"></a>配置网络</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo brctl addbr Virbr0</span><br><span class="line">sudo ifconfig Virbr0 192.168.244.133&#x2F;24 up</span><br><span class="line">sudo tunctl -t tap0</span><br><span class="line">sudo ifconfig tap0 192.168.244.134&#x2F;24 up</span><br><span class="line">sudo brctl addif Virbr0 tap0</span><br></pre></td></tr></table></figure>

<h2 id="启动虚拟环境"><a href="#启动虚拟环境" class="headerlink" title="启动虚拟环境"></a>启动虚拟环境</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo qemu-system-mipsel -M malta -kernel vmlinux-2.6.32-5-4kc-malta -hda debian_squeeze_mipsel_standard.qcow2 \</span><br><span class="line">-append &quot;root&#x3D;&#x2F;dev&#x2F;sda1 console&#x3D;tty0&quot; -net nic -net tap,ifname&#x3D;tap0,script&#x3D;no,downscript&#x3D;no -nographic -s</span><br></pre></td></tr></table></figure>
<p>系统启动后输入root/root登录至文件系统。</p>
<img src="/2023/10/30/Crack-JDC-Router-2/qemu-run.png" class="" title="Crack-JDC-Router-2">

<h2 id="配置虚拟机IP"><a href="#配置虚拟机IP" class="headerlink" title="配置虚拟机IP"></a>配置虚拟机IP</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eth0 192.168.244.132&#x2F;24</span><br></pre></td></tr></table></figure>

<h2 id="上传固件文件系统"><a href="#上传固件文件系统" class="headerlink" title="上传固件文件系统"></a>上传固件文件系统</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r .&#x2F;squashfs-root root@192.168.244.132:&#x2F;root&#x2F;</span><br></pre></td></tr></table></figure>

<h2 id="运行固件服务"><a href="#运行固件服务" class="headerlink" title="运行固件服务"></a>运行固件服务</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chroot squashfs-root &#x2F;bin&#x2F;sh</span><br></pre></td></tr></table></figure>
<p>但是由于某些原因我运行一直出错，后来索性不再尝试，改为使用另外一个工具firmware-analysis-toolkit。</p>
<h1 id="FAT"><a href="#FAT" class="headerlink" title="FAT"></a>FAT</h1><p>FAT可以直接提取固件的image然后模拟固件运行。</p>
<h2 id="下载安装工具"><a href="#下载安装工具" class="headerlink" title="下载安装工具"></a>下载安装工具</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;attify&#x2F;firmware-analysis-toolkit.git</span><br><span class="line">cd firmware-analysis-toolkit</span><br><span class="line">.&#x2F;setup.sh</span><br></pre></td></tr></table></figure>
<p>由于国内网络的原因，建议搭梯子。</p>
<h2 id="启动固件"><a href="#启动固件" class="headerlink" title="启动固件"></a>启动固件</h2><p>首先修改<code>fat.config</code>文件，将自己用户的密码添加进去，因为fat最终也是通过qemu模拟固件运行的，需要使用<code>sudo</code>权限。</p>
<h2 id="运行FAT"><a href="#运行FAT" class="headerlink" title="运行FAT"></a>运行FAT</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;fat.py xxx.bin</span><br></pre></td></tr></table></figure>
<p>实际运行中FAT会由于环境或者参数的原因生成的img有问题,导致系统无法启动，所以我手动运行的解包命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd firmadyne&#x2F;sources&#x2F;extractor&#x2F;</span><br><span class="line">.&#x2F;extract.sh xxx.bin ..&#x2F;..&#x2F;images</span><br></pre></td></tr></table></figure>
<p>并对<code>fat.py</code>做了一定的修改。最终生成的启动命令如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo qemu-system-mipsel -m 256 -M malta -kernel firmadyne&#x2F;binaries&#x2F;&#x2F;vmlinux.mipsel \</span><br><span class="line">-drive if&#x3D;ide,format&#x3D;raw,file&#x3D;firmadyne&#x2F;scratch&#x2F;&#x2F;1&#x2F;&#x2F;image.raw \</span><br><span class="line">-append &quot;root&#x3D;&#x2F;dev&#x2F;sda1 console&#x3D;ttyS0 nandsim.parts&#x3D;64,64,64,64,64,64,64,64,64,64 rdinit&#x3D;&#x2F;firmadyne&#x2F;preInit.sh \</span><br><span class="line">rw debug ignore_loglevel print-fatal-signals&#x3D;1 user_debug&#x3D;31 firmadyne.syscall&#x3D;0&quot; -nographic \</span><br><span class="line">-netdev socket,id&#x3D;net1,listen&#x3D;:2001 -device e1000,netdev&#x3D;net1 -netdev socket,id&#x3D;net2,listen&#x3D;:2002 \</span><br><span class="line">-device e1000,netdev&#x3D;net2 -netdev socket,id&#x3D;net3,listen&#x3D;:2003 -device e1000,netdev&#x3D;net3</span><br></pre></td></tr></table></figure>
<p>可以从上面启动命令中看到使用的image是FAT通过提取固件生成的。系统启动信息如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.120000] NET: Registered protocol family 2</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.120000] IP route cache hash table entries: 2048 (order: 1, 8192 bytes)</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.120000] TCP established hash table entries: 8192 (order: 4, 65536 bytes)</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.124000] TCP bind hash table entries: 8192 (order: 3, 32768 bytes)</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.124000] TCP: Hash tables configured (established 8192 bind 8192)</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.124000] TCP reno registered</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.124000] UDP hash table entries: 256 (order: 0, 4096 bytes)</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.124000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.124000] NET: Registered protocol family 1</span><br><span class="line">Nov  2 04:23:31 (none) kern.debug kernel: [    0.124000] PCI: CLS 0 bytes, default 64</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.184000] squashfs: version 4.0 (2009&#x2F;01&#x2F;31) Phillip Lougher</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.184000] Registering unionfs 2.6 (for 2.6.39.4)</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.184000] JFFS2 version 2.2. (NAND) © 2001-2006 Red Hat, Inc.</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.184000] ROMFS MTD (C) 2007 Red Hat, Inc.</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.188000] msgmni has been set to 492</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.192000] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 253)</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.192000] io scheduler noop registered</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.192000] io scheduler cfq registered (default)</span><br><span class="line">Nov  2 04:23:31 (none) daemon.notice procd: &#x2F;etc&#x2F;rc.d&#x2F;S10boot: &#x2F;etc&#x2F;rc.common: line 37: vconfig: not found</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.192000] firmadyne: devfs: 1, execute: 1, procfs: 1, syscall: 0</span><br><span class="line">Nov  2 04:23:31 (none) kern.warn kernel: [    0.192000] firmadyne: Cannot register character device: watchdog, 0xa, 0x82!</span><br><span class="line">Nov  2 04:23:31 (none) kern.warn kernel: [    0.192000] firmadyne: Cannot register character device: wdt, 0xfd, 0x0!</span><br><span class="line">Nov  2 04:23:31 (none) kern.warn kernel: [    0.228000] PCI: Enabling device 0000:00:12.0 (0000 -&gt; 0002)</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.228000] cirrusfb 0000:00:12.0: Cirrus Logic chipset on PCI bus, RAM (4096 kB) at 0x10000000</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.448000] Console: switching to colour frame buffer device 80x30</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.460000] Serial: 8250&#x2F;16550 driver, 4 ports, IRQ sharing enabled</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.484000] serial8250.0: ttyS0 at I&#x2F;O 0x3f8 (irq &#x3D; 4) is a 16550A</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.488000] console [ttyS0] enabled, bootconsole disabled</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.508000] serial8250.0: ttyS1 at I&#x2F;O 0x2f8 (irq &#x3D; 3) is a 16550A</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.532000] serial8250.0: ttyS2 at MMIO 0x1f000900 (irq &#x3D; 18) is a 16550A</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.536000] brd: module loaded</span><br><span class="line">Nov  2 04:23:31 (none) kern.info kernel: [    0.536000] loop: module loaded</span><br><span class="line">Nov  2 04:23:31 (none) kern.debug kernel: [    0.536000] ata_piix 0000:00:0a.1: version 2.13</span><br><span class="line">power off the port 0</span><br><span class="line">[   14.960000] e1000: eth1 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: RX</span><br><span class="line">[   14.996000] 8021q: adding VLAN 0 to HW filter on device eth1</span><br><span class="line">[   15.840000] e1000: eth0 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: RX</span><br><span class="line">[   15.848000] ADDRCONF(NETDEV_UP): eth0: link is not ready</span><br><span class="line">[   15.848000] 8021q: adding VLAN 0 to HW filter on device eth0</span><br><span class="line">[   15.852000] ADDRCONF(NETDEV_CHANGE): eth0: link becomes ready</span><br><span class="line">btnd start_service</span><br><span class="line">start v6 bridge ###########</span><br><span class="line">####start SFE####</span><br><span class="line">####enable SFE####</span><br><span class="line">en:1</span><br><span class="line">en:0</span><br><span class="line">en:0</span><br><span class="line">en:0</span><br><span class="line">en:1</span><br><span class="line">BusyBox v1.29.2 () built-in shell (ash)</span><br><span class="line"></span><br><span class="line"> -----------------------------------------------------</span><br><span class="line"> JDCOS 2.3.4.r1307, r7258-5eb055306f</span><br><span class="line"> -----------------------------------------------------</span><br><span class="line"> MAC: FFFFFFFFFFFF    Product: NULL</span><br><span class="line"> ROM: HR06                </span><br><span class="line"> -----------------------------------------------------</span><br><span class="line">root@HaiOS:&#x2F;#</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://james-jlc.github.io/2023/10/30/Crack-JDC-Router-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiQiu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="知秋">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/30/Crack-JDC-Router-1/" class="post-title-link" itemprop="url">破解某东路由宝之紧急升级包</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-30 19:41:33" itemprop="dateCreated datePublished" datetime="2023-10-30T19:41:33+08:00">2023-10-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-11-28 11:12:19" itemprop="dateModified" datetime="2023-11-28T11:12:19+08:00">2023-11-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>由于前段时间一代积分下降严重，付出和收益不成比例，因此尝试刷成op作为普通路由使用，但是搜索了一圈发现系统各种漏洞都已经修复，没有办法无损刷机。正好近期一代大批断线，官方紧急上线修复工具可以刷机，于是分析一下看看是否有后门可以利用，<a href="http://sd.jdbox.xyz:50080/web/#/33/215" target="_blank" rel="noopener">官方修复教程地址</a>。</p>
<p>首先下载官方修复工具，丢进IDA和Ghidra分析，通过分析输出可以确定两件事：</p>
<ol>
<li>修复工具使用Golang写的，使用了github.com/lxn/walk和github.com/lxn/win两个库。</li>
<li>通过函数签名可以确定修复工具主要是调用路由的api进行刷机，并没有使用什么后门，通过后期的抓包也确认了我的猜想。<img src="/2023/10/30/Crack-JDC-Router-1/decompile.png" class="" title="Crack-JDC-Router-1">

</li>
</ol>
<p>其中一个函数签名引起了我的注意，貌似是用来解密修复固件包的。</p>
<img src="/2023/10/30/Crack-JDC-Router-1/DecryptFunction.png" class="" title="Crack-JDC-Router-1">

<p>通过生成伪代码分析可知整个调用过程简化如下图：</p>
<img src="/2023/10/30/Crack-JDC-Router-1/uploadfile.png" class="" title="Crack-JDC-Router-1">

<p>另外通过抓包发现，修复时先通过刷入enc.txt过度固件，然后通过过度固件刷入bin.txt完成修复，至于为什么要通过过度固件刷入官方固件暂时无从知晓。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://james-jlc.github.io/2023/07/25/Build-Onnx-Runtime-For-Jetson-Xavier-NX/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiQiu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="知秋">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/07/25/Build-Onnx-Runtime-For-Jetson-Xavier-NX/" class="post-title-link" itemprop="url">Build Onnx Runtime For Jetson Xavier NX</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-07-25 11:32:12" itemprop="dateCreated datePublished" datetime="2023-07-25T11:32:12+08:00">2023-07-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-11-21 13:05:52" itemprop="dateModified" datetime="2023-11-21T13:05:52+08:00">2023-11-21</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本文主要参考 <a href="https://github.com/microsoft/onnxruntime/blob/main/dockerfiles/README.md#nvidia-jetson-tx1tx2nanoxavier" target="_blank" rel="noopener">Onnx Runtime 官方dockerfiles编译指南</a></p>
<h1 id="查看Jetson版本"><a href="#查看Jetson版本" class="headerlink" title="查看Jetson版本"></a>查看Jetson版本</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jtop</span><br></pre></td></tr></table></figure>
<p>根据jtop输出确定Jetson的系统版本号</p>
<h1 id="测试镜像"><a href="#测试镜像" class="headerlink" title="测试镜像"></a>测试镜像</h1><p>在Nvidia<a href="https://catalog.ngc.nvidia.com/containers" target="_blank" rel="noopener">镜像仓库</a>中搜索自己需要的基础镜像。</p>
<p>当前常用的镜像有：</p>
<h2 id="l4t-base"><a href="#l4t-base" class="headerlink" title="l4t-base"></a><a href="https://catalog.ngc.nvidia.com/orgs/nvidia/containers/l4t-base" target="_blank" rel="noopener">l4t-base</a></h2><p>从概述中可知自r34.1及以后的版本中不再集成CUDA,CuDNN和TensorRT等组件。对于高度定制化的需求，可以使用此镜像安装特定的CUDA和TensorRT版本。并且官方很贴心的提供了可参考的<a href="https://gitlab.com/nvidia/container-images/l4t-jetpack" target="_blank" rel="noopener">Dockerfile模板</a>。</p>
<h2 id="l4t-cuda"><a href="#l4t-cuda" class="headerlink" title="l4t-cuda"></a><a href="https://catalog.ngc.nvidia.com/orgs/nvidia/containers/l4t-cuda/" target="_blank" rel="noopener">l4t-cuda</a></h2><p>从名字可以得知此镜像集成了CUDA组件。</p>
<h2 id="l4t-tensorrt"><a href="#l4t-tensorrt" class="headerlink" title="l4t-tensorrt"></a><a href="https://catalog.ngc.nvidia.com/orgs/nvidia/containers/l4t-tensorrt/" target="_blank" rel="noopener">l4t-tensorrt</a></h2><p>从名字可以得知此镜像集成了TensorRT组件。</p>
<h2 id="l4t-jetpack"><a href="#l4t-jetpack" class="headerlink" title="l4t-jetpack"></a><a href="https://catalog.ngc.nvidia.com/orgs/nvidia/containers/l4t-jetpack" target="_blank" rel="noopener">l4t-jetpack</a></h2><p>从概述中可以得知，此镜像集成了CUDA,CuDNN和TensorRT等组件，可作为通用程序开发的基础镜像。但是因为集成了CUDA等组件，此镜像磁盘空间占用较大。</p>
<h2 id="l4t-ml"><a href="#l4t-ml" class="headerlink" title="l4t-ml"></a><a href="https://catalog.ngc.nvidia.com/orgs/nvidia/containers/l4t-ml" target="_blank" rel="noopener">l4t-ml</a></h2><p>从概述中可知此镜像集成了非常多的常用组件，包括TensorFlow, PyTorch, JupyterLab和其他常用的机器学习库，并且包含了scikit-learn, scipy和Pandas等一些数据分析库。因此此镜像磁盘空间占用非常大，但是因为集成了很多库所以省去了很多的编译时间。</p>
<p>另外，对于一些常用的python库，Nvidia官方为Jetson专门提供了一个<a href="https://elinux.org/Jetson_Zoo" target="_blank" rel="noopener">集合链接</a>，可以从中查找需要的库进行下载安装。</p>
<p>我测试的系统版本是4.4 r35.1.0,可以选择l4t-ml镜像，省去了安装环境的时间。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">FROM nvcr.io&#x2F;nvidia&#x2F;l4t-ml:r35.1.0-py3</span><br><span class="line"></span><br><span class="line">ENV TZ&#x3D;Asia&#x2F;Shanghai</span><br><span class="line">RUN ln -snf &#x2F;usr&#x2F;share&#x2F;zoneinfo&#x2F;$TZ &#x2F;etc&#x2F;localtime &amp;&amp; echo $TZ &gt; &#x2F;etc&#x2F;timezone</span><br><span class="line"></span><br><span class="line">WORKDIR .&#x2F;app</span><br><span class="line"> </span><br><span class="line">ADD . .</span><br><span class="line"></span><br><span class="line">RUN pip3 install --no-cache-dir onnxruntime_gpu-1.12.1-cp38-cp38-linux_aarch64.whl &amp;&amp; rm onnxruntime_gpu-1.12.1-cp38-cp38-linux_aarch64.whl</span><br><span class="line"></span><br><span class="line">RUN pip install -r requirements.txt -i https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple</span><br><span class="line"></span><br><span class="line">EXPOSE 8080</span><br><span class="line">CMD [&quot;python3&quot;, &quot;.&#x2F;main.py&quot;]</span><br></pre></td></tr></table></figure>

<h1 id="编译自定义镜像"><a href="#编译自定义镜像" class="headerlink" title="编译自定义镜像"></a>编译自定义镜像</h1><p>由于官方提供的镜像要么只集成了基础组件，要么集成了太多的开源库，因此当在生产环境使用时，需要根据项目需要编译自己的镜像。通常项目组会构建自己的基础镜像，在基础镜像上根据项目的需要再加入更多的组件库。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://james-jlc.github.io/2023/07/24/Investigation-of-RPA-framework/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiQiu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="知秋">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/07/24/Investigation-of-RPA-framework/" class="post-title-link" itemprop="url">Investigation of RPA framework</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-07-24 09:28:31" itemprop="dateCreated datePublished" datetime="2023-07-24T09:28:31+08:00">2023-07-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-11-21 13:05:52" itemprop="dateModified" datetime="2023-11-21T13:05:52+08:00">2023-11-21</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a href="https://www.provincialtransport.com/rpazs/4803.html" target="_blank" rel="noopener">https://www.provincialtransport.com/rpazs/4803.html</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/551359099" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/551359099</a></p>
<p>PyAutoGUI<br><a href="https://github.com/asweigart/pyautogui" target="_blank" rel="noopener">https://github.com/asweigart/pyautogui</a></p>
<p>dogtail<br><a href="https://gitlab.com/dogtail/dogtail/" target="_blank" rel="noopener">https://gitlab.com/dogtail/dogtail/</a></p>
<p>Selenium</p>
<p>OpenRPA<br><a href="https://github.com/open-rpa/openrpa" target="_blank" rel="noopener">https://github.com/open-rpa/openrpa</a></p>
<p>taskt<br><a href="https://github.com/saucepleez/taskt" target="_blank" rel="noopener">https://github.com/saucepleez/taskt</a></p>
<p>UI.Vision<br><a href="https://github.com/A9T9/RPA" target="_blank" rel="noopener">https://github.com/A9T9/RPA</a></p>
<p>TagUI<br><a href="https://github.com/aisingapore/TagUI" target="_blank" rel="noopener">https://github.com/aisingapore/TagUI</a></p>
<p>Robot Framework<br><a href="https://github.com/robotframework/robotframework" target="_blank" rel="noopener">https://github.com/robotframework/robotframework</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://james-jlc.github.io/2022/12/05/OPCDA-errors/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiQiu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="知秋">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/12/05/OPCDA-errors/" class="post-title-link" itemprop="url">OPCDA errors</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-12-05 18:38:01" itemprop="dateCreated datePublished" datetime="2022-12-05T18:38:01+08:00">2022-12-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-11-21 13:05:52" itemprop="dateModified" datetime="2023-11-21T13:05:52+08:00">2023-11-21</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="0x80070776"><a href="#0x80070776" class="headerlink" title="0x80070776"></a>0x80070776</h1><p>The following error may occur when a client (ie. Enterprise Guide, VB,<br>Java) attempts a connection to a remote SAS Objectserver.</p>
<p>   Function Name:Advise CILanguageEvents<br>   0x80070776 - The object exporter specified was not found.</p>
<p>Permission was not granted by the client for the server to make calls on<br>the server interface.</p>
<p>Listed below are possible reasons that could cause this error:</p>
<ol>
<li><p>The IP address on the client machine is being used by another<br>computer at your site.</p>
</li>
<li><p>The client machine has been configured with TCP/IP as a network<br>transport, but TCP/IP is improperly configured.  For example, the<br>client machines may be configured to dynamically assign an IP<br>address using DHCP, yet a DHCP server may not be available, so<br>there is no available IP address.  The solution in this case is to<br>properly configure TCP/IP networking.</p>
</li>
<li><p>With Windows2000 COM, the marshalling packet contains the DNS<br>name.  If the client is unable to ping the server with this<br>fully qualified domain name, then this error may occur.  Use a<br>network monitoring trace facility such as netmon to take a trace<br>of the conversation and check to see what name is being returned<br>on the response packet to your OpenConnection method call.</p>
</li>
<li><p>Using DCOM across proxy servers, verify that the client computer<br>and proxy server can reach the DCOM server.  Verify this by<br>using the full computer name, such as &lt;computername.domain&gt;.</p>
</li>
</ol>
<p>I don’t believe that this is caused by a firewall. I have added some comments for clarification about firewall / ports below for completeness, but I don’t believe this is the issue you are running into. The 80070776 error you are getting is “The object exporter specified was not found”, which generally indicates some type of network conflict. It is most likely due to improper DNS resolution. I would suggest adding an entry in the HOST file that matches the shortname of the target OPC Server. Are you able to connect / ping the target machine properly?</p>
<p>To add on to the previous comments, opening up port 135 between the interface (client) and the server is not enough. DCOM communications initiate on port 135 and will then use an ephemeral port. For Windows 2008 (Vista) and later, the ephemeral port range is 49152-65535. Because OPC operations may also use callbacks (async), those ports need to be opened bidirectionally.</p>
<p>It is possible to reduce the port range for ephemeral ports, but you risk running into port exhaustion. See more details on how to do so here: 2973OSI8 - Configuring ports for DCOM for use with the OPC Interface. NAT and Firewall considerations  Additionally, although the local Windows Firewall is turned off on the machine it does not mean that it does not have to go through a firewall on the network. I would suggest contacting your IT/Infrastructure/Network team. If you are still seeing the message after defining the ephemeral port range and insuring that all of the ephemeral ports are opened, the next step would be to look at a network trace (Wireshark or netsh) and then looking from lost packets.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://james-jlc.github.io/2022/10/29/Plan-to-create-a-PDF-Editor/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiQiu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="知秋">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/29/Plan-to-create-a-PDF-Editor/" class="post-title-link" itemprop="url">Plan to create a PDF Editor</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-10-29 14:20:29" itemprop="dateCreated datePublished" datetime="2022-10-29T14:20:29+08:00">2022-10-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-11-21 13:05:52" itemprop="dateModified" datetime="2023-11-21T13:05:52+08:00">2023-11-21</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>PDF.js <a href="https://github.com/mozilla/pdf.js.git" target="_blank" rel="noopener">https://github.com/mozilla/pdf.js.git</a><br>node-poppler <a href="https://github.com/Fdawgs/node-poppler" target="_blank" rel="noopener">https://github.com/Fdawgs/node-poppler</a><br>poppler<br>mupdf</p>
<p>迅捷使用的是pspdfkit库，pspdfkit库使用的应该是poppler后端</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ZhiQiu"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">ZhiQiu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">27</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/James-JLC" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;James-JLC" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2013 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZhiQiu</span>
    <span style="padding-left: 20px;">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
    </span>
</div>
<!--
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>-->

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
